컴퓨터의 메모리는 속도와 용량을 기준으로 계층 구조(hierarchy)로 되어 있음

1. 전체 구조
						위치				속도, 용량				비고
 레지스터 메모리		CPU 내부			매우 빠름, 매우 작음(B)		CPU가 직접 연산에 사용
 캐시 메모리		CPU와 메인 메모리 사이		빠름, 작음(MB)			자주 쓰는 데이터 저장
 메인 메모리		메인보드 위					중간, 중간(GB)			실행 중인 프로그램 저장
 보조 기억장치			SSH/HDD				느림, 매우큼(TB)			프로그램과 파일 저장

2. 메인 메모리(RAM : Random Acess Memory)
컴퓨터가 프로그램을 실행하고 데이터를 일시적으로 저장하는 단기 메모리로, 전원이 켜져 있는 동안에만 유지되는 휘발성 메모리

 ┌─────────────────────┐		-> 높은 주소
 │	커널 영역(OS)		 │
 ├─────────────────────┤
 │     스택 메모리       │ 		-> 함수 호출 시 자동 생성
 │     ↓ 아래로 확장     │
 ├─────────────────────┤
 │					   │
 │		빈 공간	  	    │		-> 두 영역이 이 사이에서 만날 수도 있음(스택 메모리가 과다할 경우 스택 오버플로우, 힙 메모리가 과다할 경우 힙 오버플로우)
 │					   │
 ├─────────────────────┤
 │     ↑ 위로 확장       │
 │       힙 메모리       │		-> new/malloc 등으로 동적 할당
 ├─────────────────────┤
 │     데이터 영역       │		 -> static/전역 변수
 ├─────────────────────┤
 │    	코드 영역		│ 
 └─────────────────────┘		-> 낮은 주소

 3. 스택 오버플로우
한 프레임 내에 함수의 과다한 호출로 지역변수 등이 과다하게 할당되면서 스택이 쌓여 생기는 문제.
자주 발생하는 실수 : 함수가 자기 자신을 반복해서 호출(무한 재귀) 하거나 서로 다른 두 함수가 서로를 무한히 호출하는 상황(순환 참조) 등에서 발생

4. 레지스터 메모리
CPU 내부에 있는 가장 빠른 메모리
CPU가 읽고 쓸 수 있는 유일한 저장공간
ns 단위로 접근할 수 있음

5. 캐시 메모리
CPU와 메인 메모리 사이의 속도 차이를 줄이기 위한 고속 버퍼 메모리
병목 현상 방지
최근 접근한 데이터나 근처 데이터를 캐시에 저장함
CPU가 메인 메모리(RAM) 대신 캐시에서 읽으면 성능이 수십~수백배 향상됨

				위치				크기			역할			
L1 Cache		CPU 코어 내부		32 ~ 128KB		명령어/데이터 분리 저장			↓ 아래로 갈수록 속도 느려짐
L2 Cache		코어 내부 or 외부	 수백KB ~ 1MB	 L1 백업용
L3 Cache		CPU 칩 전체 공유	 수 MB			코어간 데이터 공유
L4 Cache(일부)	 메인보드 칩셋		  수십 MB		  고급 CPU용

6. 캐시 미스
CPU가 요청한 데이터가 캐시에 없을때 발생
(<-> 캐시 히트 : CPU가 요청한 데이터가 캐시에 존재)

캐시 미스의 종류
1) Cold Miss(Compulsory Miss)
최초 접근해서 해당 주소값이 캐시에 없을 경우 발생

2) Capacity Miss
필요한 데이터 전체가 캐시 용량보다 커서 이전에 쓰던 데이터를 캐시에서 삭제했는데, 다시 필요해서 미스가 나는 상황

3) Conflict Miss
RAM의 주소 - 캐시 데이터의 매핑 방식 때문에 서로 다른 주소가 같은 캐시 슬롯에 있어 매번 캐시 교체가 발생함

7. 캐시의 지역성
현재 보고 있는 주소의 인접한 주소들을 여러번 쓰는 패턴
1) 시간 지역성
같은 데이터를 짧은 시간에 반복해서 사용
ex : 반복문에서 누적되는 변수
int sum = 0;
for (int i = 0; i < N; ++i) {
    sum += arr[i];
}
CPU/캐시는 이런 변수들을 가능한 한 레지스터, L1에 계속 유지하려고 한다.

2) 공간 지역성
캐시는 RAM에서 한 칸만 가져오는게 아닌, 그 주소 주변까지 묶어서 가져와서 캐시에 저장한다.
